# MANUALE GENERALE - SVUOTAFRIGO v.2

![Logo SVUOTAFRIGO](../img/logo_svuotafrigo.png)


---

## GENERALITÃ€

### Contesto e Problematica

Il progetto **SVUOTAFRIGO** nasce dalla volontÃ  di affrontare il problema dello spreco alimentare domestico, un tema di rilevanza globale con significativo impatto ambientale, economico e sociale. Secondo ricerche scientifiche, tra cui la tesi di dottorato di **Silvia Gaiani (2021)** - *"Spreco alimentare domestico: cause, conseguenze e strategie di riduzione"* - gran parte del cibo scartato nelle abitazioni potrebbe essere riutilizzato in maniera efficiente attraverso una migliore gestione degli ingredienti disponibili.

### Genesi del Progetto

L'applicazione Ã¨ stata sviluppata come risposta concreta a questa problematica, offrendo uno strumento tecnologico pratico e accessibile che supporti gli utenti nella gestione intelligente degli ingredienti domestici. Il progetto combina principi di sostenibilitÃ  ambientale, ottimizzazione delle risorse e inclusivitÃ  alimentare.

### Obiettivi Principali

**A breve termine**:
- Fornire uno strumento immediato per ridurre lo spreco alimentare domestico
- Facilitare la pianificazione dei pasti basata su ingredienti disponibili
- Garantire accessibilitÃ  a persone con diverse esigenze alimentari

**A lungo termine**:
- Contribuire alla riduzione dell'impatto ambientale dello spreco alimentare
- Educare gli utenti a pratiche di consumo consapevole
- Creare una community di utenti che condividono ricette antispreco

### Target Utenti

**Utenti Primari**:
- Famiglie che desiderano ridurre sprechi e ottimizzare la spesa
- Persone con esigenze alimentari specifiche (allergie, diete religiose/etiche)
- Studenti e giovani professionisti con budget limitato

**Utenti Secondari**:
- Appassionati di cucina che vogliono sperimentare
- Persone attente alla sostenibilitÃ  ambientale
- Chiunque cerchi ispirazione culinaria quotidiana

---

## SCOPO

### Obiettivi Specifici e Misurabili

L'applicazione SVUOTAFRIGO si pone i seguenti obiettivi concreti:

1. **Riduzione Spreco**: Permettere agli utenti di utilizzare ingredienti giÃ  disponibili prima che vadano a male
2. **Personalizzazione**: Offrire suggerimenti di ricette adattate a esigenze dietetiche, religiose e mediche individuali
3. **InclusivitÃ **: Garantire accessibilitÃ  attraverso filtri per allergie, intolleranze e scelte etiche
4. **SemplicitÃ **: Fornire un'interfaccia intuitiva utilizzabile senza registrazione obbligatoria
5. **Contribuzione**: Permettere agli utenti registrati di arricchire il database con proprie ricette

### FunzionalitÃ  Principali

**Per tutti gli utenti** (ospiti e registrati):
- âœ… Ricerca ricette basata su ingredienti disponibili
- âœ… Filtri intelligenti (Portata, Stile di Vita, Intolleranze)
- âœ… Accesso a database di ricette pubbliche
- âœ… FAQ e supporto tecnico

**Per utenti registrati**:
- âœ… Creazione e salvataggio ricette personali
- âœ… Gestione archivio ricette personali
- âœ… Profilo personalizzato

### Value Proposition

**Per l'utente**:
- ğŸ’° **Risparmio economico**: Riduzione acquisti inutili, ottimizzazione spesa
- â±ï¸ **Risparmio tempo**: Suggerimenti immediati senza indecisione
- ğŸ½ï¸ **Alimentazione sicura**: Filtri garantiscono compatibilitÃ  con esigenze personali
- â™»ï¸ **Impatto positivo**: Contribuzione concreta alla sostenibilitÃ 

**Per la societÃ **:
- ğŸŒ Riduzione impatto ambientale dello spreco alimentare
- ğŸ“š Educazione a pratiche di consumo consapevole
- ğŸ¤ Promozione di alimentazione inclusiva

---

## APPLICABILITÃ€

### Casi d'Uso Principali

#### Caso d'Uso 1: Utente Occasionale
**Scenario**: Maria ha in frigo zucchine, uova e formaggio in scadenza  
**Azione**: Inserisce gli ingredienti, applica filtro "Vegetariana"  
**Risultato**: Ottiene suggerimenti di ricette vegetariane utilizzabili immediatamente

#### Caso d'Uso 2: Utente con Intolleranze
**Scenario**: Luca Ã¨ celiaco e intollerante al lattosio  
**Azione**: Cerca ricette con filtri "Senza Glutine" e "Senza Lattosio"  
**Risultato**: Visualizza solo ricette sicure per le sue esigenze

#### Caso d'Uso 3: Utente Contributore
**Scenario**: Sara ha una ricetta vegana di famiglia  
**Azione**: Si registra, crea la ricetta con ingredienti e filtri appropriati  
**Risultato**: La ricetta viene salvata nel suo archivio personale

### Personas Utente

**Persona 1 - "La Mamma Organizzata"**
- EtÃ : 35-45 anni
- Obiettivo: Ridurre sprechi e ottimizzare spesa familiare
- Esigenze: Ricette veloci, adatte a bambini, facili da preparare
- Frequenza uso: Quotidiana (pianificazione cena)

**Persona 2 - "Lo Studente Consapevole"**
- EtÃ : 20-30 anni
- Obiettivo: Mangiare bene con budget limitato
- Esigenze: Ricette economiche, veloci, pochi ingredienti
- Frequenza uso: 3-4 volte/settimana

**Persona 3 - "L'Appassionato di Cucina"**
- EtÃ : 25-55 anni
- Obiettivo: Sperimentare e condividere ricette
- Esigenze: Creare proprie ricette, esplorare nuove combinazioni
- Frequenza uso: Settimanale (creazione contenuti)

### Filtri Inclusivi Disponibili

L'applicazione Ã¨ sensibile a diverse esigenze alimentari attraverso filtri multipli:

**Diete Religiose/Etiche**:
- ğŸ•Œ **Halal** (Dieta Musulmana): Conforme ai precetti islamici
- âœ¡ï¸ **Kosher** (Dieta Ebraica): Conforme alla kasherut
- ğŸŒ± **Vegetariana**: Senza carne e pesce (ammette uova/latticini)
- ğŸ¥¬ **Vegana**: Completamente priva di ingredienti animali

**Intolleranze/Allergie**:
- ğŸŒ¾ **Senza Glutine**: Per celiaci e intolleranti al glutine
- ğŸ¥› **Senza Lattosio**: Per intolleranti al lattosio
- ğŸ¦ **Senza Crostacei**: Per allergici a crostacei/molluschi
- ğŸ¥œ **Senza Frutta Secca**: Per allergici a noci, mandorle, nocciole, ecc.

**Tipologia Portata**:
- Antipasto, Primo, Secondo, Contorno, Dolce

### Limitazioni Attuali

- Nessun upload immagini per ricette
- Ricette personali visibili solo al creatore (no condivisione sociale)
- Nessun sistema di rating/recensioni
- Nessuna funzionalitÃ  di lista della spesa automatica

### Roadmap FunzionalitÃ  Future

- [ ] Upload immagini per ricette
- [ ] Sistema rating e recensioni
- [ ] Condivisione ricette tra utenti
- [ ] Notifiche email (reset password, conferma account)
- [ ] API REST per app mobile
- [ ] Integrazione social login (Google/Facebook)

---

## RESPONSABILITÃ€

### Team di Progetto

Il progetto SVUOTAFRIGO Ã¨ gestito da un team multidisciplinare con ruoli ben definiti:

**Azienda**: 0-Waste

**Team 0-Waste**:
- Sviluppo backend, database e architettura
- UI/UX design e accessibilitÃ 
- Strategia commerciale e marketing
- Documentazione tecnica e manuali

### ResponsabilitÃ  Specifiche per Area

**Sviluppo e Manutenzione** (Team 0-Waste):
- Implementazione nuove funzionalitÃ 
- Bug fixing e troubleshooting
- Aggiornamenti framework e dipendenze
- Sicurezza applicazione
- Performance optimization
- Database administration

**Design e UX** (Team 0-Waste):
- Design interfaccia e componenti
- AccessibilitÃ  (WCAG 2.1 compliance)
- Responsive design (mobile/tablet/desktop)
- User testing e feedback
- Evoluzione design system

**Strategia e Comunicazione** (Team 0-Waste):
- Piano di crescita utenti
- Partnerships e collaborazioni
- Comunicazione esterna
- Community management
- Analisi metriche utilizzo

**Documentazione** (Team 0-Waste):
- Manuali utente e tecnici
- Changelog e release notes
- Inline code documentation
- Guide per contributori

### Supporto Utenti e Gestione Problematiche

**Canali di Supporto**:
- ğŸ“§ Form contatti (pagina Assistenza)
- ğŸ“– FAQ dinamiche
- ğŸ“„ Manuale utente PDF

**Service Level Agreement (SLA)**:
- Risposta richieste supporto: Entro 24 ore lavorative
- Bug critici (app non funzionante): Fix entro 48 ore
- Bug minori (UI glitch, errori non bloccanti): Fix entro 1 settimana
- Feature request: Valutate e prioritizzate trimestralmente

**Processo di Escalation**:
1. Utente segnala problema via form contatti
2. Team 0-Waste triage (entro 4 ore)
3. Se tecnico â†’ escalation al reparto tecnico
4. Risoluzione e comunicazione all'utente
5. Aggiornamento FAQ se problema ricorrente

### Governance del Progetto

- **Decisioni tecniche**: Team Development 0-Waste
- **Decisioni design/UX**: Team Design 0-Waste
- **Decisioni business**: Team Business 0-Waste
- **Decisioni architetturali maggiori**: Consenso 0-Waste

**Meeting di allineamento**: Settimanale (review progresso, prioritÃ , blockers)

---

## RIFERIMENTI

### Bibliografia Scientifica

1. **Gaiani, S. (2021)**. *"Spreco alimentare domestico: cause, conseguenze e strategie di riduzione"*. Tesi di Dottorato.  
   - Fondamento teorico del progetto
   - Analisi cause spreco domestico  
   - Strategie di prevenzione implementate nell'app

### Standard e Linee Guida

#### AccessibilitÃ 
- **WCAG 2.1** (Web Content Accessibility Guidelines)
  - Level AA compliance target
  - Implementazione di contrasti colore, navigazione keyboard, screen reader support

#### Codice e Architettura
- **PSR-7**: HTTP Message Interface
- **PSR-15**: HTTP Server Request Handlers  
- **PSR-12**: Extended Coding Style Guide
- **PSR-4**: Autoloading Standard (via Composer)

#### Privacy e Dati
- **GDPR** (General Data Protection Regulation)
  - Gestione consenso utente
  - Diritto all'oblio
  - Minimizzazione dati raccolti

### Documentazione Tecnica Framework/Librerie

#### Backend
- **Slim Framework 4**: https://www.slimframework.com/docs/v4/
  - Routing, middleware, dependency injection
- **Mustache.php**: https://github.com/bobthecow/mustache.php
  - Template engine logic-less
- **PDO**: https://www.php.net/manual/en/book.pdo.php
  - Database abstraction layer

#### Frontend
- **Bootstrap 5**: https://getbootstrap.com/docs/5.0/
  - Responsive grid, componenti UI
- **Font Awesome**: https://fontawesome.com/
  - Icone vettoriali

### Repository e Risorse Progetto

- **Repository Git**: (da specificare se pubblico)
- **Deployment**: http://localhost/SVUOTAFRIGO (ambiente sviluppo)
- **Documentazione**:
  - Manuale Utente: `Documentazione/MANUALE_UTENTE.md`
  - Manuale Generale: `Documentazione/MANUALE_GENERALE.md`
- **Database Schema**: `svuotafrigo_db.sql`

---

## ARCHITETTURA SOFTWARE

### Pattern Architetturale

SVUOTAFRIGO Ã¨ costruita seguendo il pattern **MVC (Model-View-Controller)**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Browser   â”‚ â”€â”€â”€â–º â”‚  Controller  â”‚ â”€â”€â”€â–º â”‚   Model     â”‚
â”‚   (User)    â”‚      â”‚  (Business   â”‚      â”‚ (Database)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   Logic)     â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â–²             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
       â”‚                     â”‚                     â”‚
       â”‚             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚     View     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚  (Mustache)  â”‚
                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Model**: 
- `Database.php` (Singleton pattern)
- Future classi in `models/` per logica dati

**View**: 
- Template Mustache (`.mst`) in `templates/`
- Separazione logica da presentazione

**Controller**: 
- Classi in `controllers/` (es. `RicetteController`, `CreaRicettaController`)
- Gestiscono richieste HTTP, business logic, preparano dati per view

### Stack Tecnologico Completo

#### Backend Stack
| Componente | Tecnologia | Versione | Ruolo |
|------------|------------|----------|-------|
| Linguaggio | PHP | 8.x | Server-side logic |
| Framework | Slim | 4.x | Routing, middleware, PSR-7/15 |
| Template Engine | Mustache | 3.x | Logic-less templates |
| Database | MySQL | 8.x | Persistenza dati |
| Data Access | PDO | Built-in PHP | Database abstraction |
| Dependency Mgmt | Composer | 2.x | Gestione dipendenze |

#### Frontend Stack
| Componente | Tecnologia | Versione | Ruolo |
|------------|------------|----------|-------|
| Markup | HTML5 | - | Struttura |
| Styling | CSS3 | - | Presentazione |
| UI Framework | Bootstrap | 5.x | Responsive grid, componenti |
| JS | Vanilla JavaScript | ES6+ | InterattivitÃ  client-side |
| Icons | Font Awesome | 6.x | Icone vettoriali |
| Fonts | Google Fonts | - | Typography |

#### Middleware Chain

L'applicazione utilizza una pipeline di middleware (pattern Chain of Responsibility):

```
Request â†’ SessionMiddleware 
       â†’ UIMessageMiddleware 
       â†’ FooterMiddleware 
       â†’ MenuMiddleware 
       â†’ PageMiddleware 
       â†’ Controller 
       â†’ Response
```

Ogni middleware ha una responsabilitÃ  specifica:
- **SessionMiddleware**: Gestione sessioni PHP
- **UIMessageMiddleware**: Messaggi flash (success/error)
- **FooterMiddleware**: Inject footer nella pagina
- **MenuMiddleware**: Inject menu contestuale (ospite/registrato)
- **PageMiddleware**: Inizializzazione oggetto Page

### Database Architecture

**DBMS**: MySQL 8.0+  
**Charset**: utf8mb4 (supporto emoji e caratteri internazionali)  
**Collation**: utf8mb4_unicode_ci

**Accesso Database**:
- Pattern: Singleton (`Database::getInstance()`)
- Connection: PDO con prepared statements
- Configurazione: Hard-coded in `Database.php` (TODO: migrare a .env)

---

## STRUTTURA PROGETTO

### Directory Tree

```
SVUOTAFRIGO/
â”œâ”€â”€ .git/                       # Version control
â”œâ”€â”€ .gitignore                  # Git ignore rules
â”œâ”€â”€ .htaccess                   # Apache rewrite rules
â”œâ”€â”€ Documentazione/
â”‚   â”œâ”€â”€ MANUALE_GENERALE.md     # Questo documento
â”‚   â””â”€â”€ MANUALE_UTENTE.md       # Manuale utente finale
â”œâ”€â”€ assets/                     # Asset statici
â”œâ”€â”€ cache/                      # Cache Mustache template
â”‚   â””â”€â”€ mustache/               # Compiled templates
â”œâ”€â”€ configuratores/             # Configuratori (PageConfigurator, RouterConfigurator)
â”œâ”€â”€ controllers/                # Controller MVC (9 file)
â”œâ”€â”€ img/                        # Immagini statiche
â”œâ”€â”€ includes/                   # Classi core (9 file)
â”œâ”€â”€ messages/                   # Template messaggi UI
â”œâ”€â”€ middlewares/                # Middleware Slim (5 file)
â”œâ”€â”€ models/                     # Modelli (future implementazioni)
â”œâ”€â”€ stile/                      # CSS custom
â”œâ”€â”€ templates/                  # Template Mustache
â”‚   â”œâ”€â”€ css/                    # CSS inline templates
â”‚   â”œâ”€â”€ js/                     # JavaScript inline templates
â”‚   â”œâ”€â”€ ricette/                # Template sezione ricette (6 file)
â”‚   â””â”€â”€ ui/                     # Template UI generale (8 file)
â”œâ”€â”€ ui/                         # Componenti UI
â”œâ”€â”€ vendor/                     # Dipendenze Composer
â”œâ”€â”€ views/                      # Viste (future implementations)
â”œâ”€â”€ autoload.php                # Custom autoloader
â”œâ”€â”€ composer.json               # Composer dependencies
â”œâ”€â”€ composer.lock               # Lock versioni
â”œâ”€â”€ config.php                  # Configurazione costanti
â”œâ”€â”€ index.php                   # Entry point
â”œâ”€â”€ menu.php                    # Configurazione menu dinamico
â”œâ”€â”€ routes.php                  # Definizione route
â”œâ”€â”€ structure.php               # Struttura applicazione
â””â”€â”€ svuotafrigo_db.sql         # Database schema + seed data
```

### File Chiave

| File | Descrizione |
|------|-------------|
| `index.php` | Front controller, entry point applicazione |
| `config.php` | Costanti configurazione (paths, cache) |
| `routes.php` | Mappatura URL â†’ Controller::method |
| `menu.php` | Logica menu dinamico ospite/registrato |
| `autoload.php` | Autoloader custom per classi progetto |
| `composer.json` | Dipendenze Slim, Mustache, PSR-7 |
| `svuotafrigo_db.sql` | Schema DB completo |

---

## DATABASE SCHEMA

### Tabelle

#### 1. **utenti**
Memorizza account utenti registrati.

| Colonna | Tipo | Vincoli | Descrizione |
|---------|------|---------|-------------|
| `id_utente` | INT | PK, AUTO_INCREMENT | ID univoco utente |
| `email` | VARCHAR(100) | UNIQUE, NOT NULL | Email login |
| `password` | VARCHAR(255) | NOT NULL | Password hash |
| `nome` | VARCHAR(50) | NULL | Nome visualizzato |

**Indici**: PRIMARY KEY (`id_utente`), UNIQUE (`email`)

#### 2. **ricette**
Memorizza tutte le ricette (pubbliche e personali).

| Colonna | Tipo | Vincoli | Descrizione |
|---------|------|---------|-------------|
| `id` | INT | PK, AUTO_INCREMENT | ID univoco ricetta |
| `titolo` | VARCHAR(255) | NOT NULL | Nome ricetta |
| `procedimento` | TEXT | NOT NULL | Istruzioni preparazione |
| `tipologia` | VARCHAR(50) | NULL | Antipasto/Primo/Secondo/Contorno/Dolce |
| `dieta_musulmana` | TINYINT(1) | DEFAULT 0 | Halal |
| `dieta_ebraica` | TINYINT(1) | DEFAULT 0 | Kosher |
| `vegetariana` | TINYINT(1) | DEFAULT 0 | Vegetariana |
| `vegana` | TINYINT(1) | DEFAULT 0 | Vegana |
| `senza_glutine` | TINYINT(1) | DEFAULT 0 | Gluten-free |
| `senza_lattosio` | TINYINT(1) | DEFAULT 0 | Lactose-free |
| `senza_crostacei` | TINYINT(1) | DEFAULT 1 | No shellfish |
| `senza_frutta_secca` | TINYINT(1) | DEFAULT 1 | No nuts |
| `id_utente` | INT | FK, NULL | Creatore (NULL = pubblica) |

**Indici**: PRIMARY KEY (`id`), FOREIGN KEY (`id_utente`)

#### 3. **ingredienti**
Catalogo ingredienti (auto-popolato).

| Colonna | Tipo | Vincoli | Descrizione |
|---------|------|---------|-------------|
| `id` | INT | PK, AUTO_INCREMENT | ID univoco ingrediente |
| `nome` | VARCHAR(100) | UNIQUE, NOT NULL | Nome (es. "Pomodoro") |

**Indici**: PRIMARY KEY (`id`), UNIQUE (`nome`)

#### 4. **ricette_ingredienti**
Tabella di giunzione Many-to-Many.

| Colonna | Tipo | Vincoli | Descrizione |
|---------|------|---------|-------------|
| `id_ricetta` | INT | FK | Riferimento ricetta |
| `id_ingrediente` | INT | FK | Riferimento ingrediente |

**Indici**: PRIMARY KEY (`id_ricetta`, `id_ingrediente`)

### Relazioni

```
utenti (1) â”€â”€â”€â”€â”€< (0..N) ricette
                         â†“
                    ricette_ingredienti (junction)
                         â†“
ingredienti (1) â”€â”€â”€â”€â”€< (0..N) ricette_ingredienti
```

- Un utente puÃ² creare N ricette (0..N)
- Una ricetta appartiene a 0 o 1 utente (NULL = pubblica)
- Una ricetta contiene N ingredienti (Many-to-Many)
- Un ingrediente Ã¨ usato in N ricette (Many-to-Many)

---

## PATTERN E BEST PRACTICES

### Design Pattern Implementati

#### 1. Singleton Pattern
```php
// Database.php
public static function getInstance() {
    if (self::$instance === null) {
        self::$instance = new Database();
    }
    return self::$instance;
}
```

**Utilizzato in**: `Database`, `Application`, `PageConfigurator`  
**Scopo**: Garantire singola istanza condivisa

#### 2. Front Controller Pattern
**Entry Point**: `index.php`  
**Scopo**: Centralizzare gestione richieste HTTP

#### 3. MVC Pattern
**Scopo**: Separazione concerns (dati, logica, presentazione)

#### 4. Middleware Pattern (Chain of Responsibility)
**Scopo**: Processing modulare richieste HTTP

### Best Practices Seguite

âœ… **PSR-7** (HTTP Message Interface)  
âœ… **PSR-15** (HTTP Handlers)  
âœ… **Prepared Statements** (SQL injection prevention)  
âœ… **Logic-less Templates** (Mustache)  
âœ… **Autoloading** (PSR-4 via Composer)  
âœ… **Dependency Injection** (Slim Container)

### Convenzioni Naming

**PHP**:
- Classi: `PascalCase` (es. `RicetteController`)
- Metodi: `camelCase` (es. `mostraRicette()`)
- Database: `snake_case` (es. `id_utente`)

**Files**:
- Controller: `NomeController.php`
- Template: `nome_template.mst`
- Config: `lowercase.php`

---

## SICUREZZA

### Misure Implementate

#### SQL Injection Prevention âœ…
```php
// Prepared statements con binding parametri
$stmt = $db->prepare("SELECT * FROM ricette WHERE id = :id");
$stmt->execute([':id' => $id]);
```

#### XSS Prevention âœ…
- Mustache auto-escape HTML di default
- Triple-stash `{{{var}}}` solo quando sicuro

#### Session Security âœ…
- Gestione sessioni via `SessionMiddleware`
- Session fixation prevention

### VulnerabilitÃ  Note

âš ï¸ **CSRF Protection: NON IMPLEMENTATO**  
**Rischio**: Form submission da siti esterni  
**Mitigazione TODO**: Implementare token CSRF

âš ï¸ **Password Hashing: DA VERIFICARE**  
**Stato**: Storage VARCHAR(255) presente ma algoritmo hash non verificato  
**Raccomandato**: `password_hash()` con BCRYPT/ARGON2

âš ï¸ **Session Timeout: NON CONFIGURATO**  
**Raccomandato**: Timeout 30 minuti inattivitÃ 

âš ï¸ **Rate Limiting: NON IMPLEMENTATO**  
**Rischio**: Brute force attacks  
**Raccomandato**: Limit tentativi login

### Checklist Sicurezza

- [x] SQL Injection prevention (prepared statements)
- [x] XSS prevention (Mustache escape)
- [x] Session management present
- [ ] CSRF protection
- [ ] Password hashing verification
- [ ] Session timeout configuration
- [ ] Rate limiting
- [ ] HTTPS enforcement
- [ ] Security headers (CSP, X-Frame-Options)

---

## CONFIGURAZIONE E DEPLOYMENT

### Requisiti Server

- **Web Server**: Apache 2.4+ (con mod_rewrite)
- **PHP**: 8.0 o superiore
- **Database**: MySQL 8.0+ o MariaDB 10.5+
- **Composer**: 2.x
- **Estensioni PHP**: PDO, PDO_MySQL, mbstring, json

### Deployment Steps

#### 1. Setup Ambiente
```bash
# Verificare requisiti
php -v  # >= 8.0
mysql --version  # >= 8.0

# Verificare mod_rewrite abilitato
apache2ctl -M | grep rewrite
```

#### 2. Clone e Dipendenze
```bash
cd /var/www/html
git clone <repository-url> SVUOTAFRIGO
cd SVUOTAFRIGO
composer install --no-dev --optimize-autoloader
```

#### 3. Database Setup
```bash
# Creare database
mysql -u root -p -e "CREATE DATABASE svuotafrigo CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# Importare schema
mysql -u root -p svuotafrigo < svuotafrigo_db.sql
```

#### 4. Configurazione
```php
// config.php - Modificare BASE_PATH se necessario
define("BASE_PATH", "/SVUOTAFRIGO");

// includes/Database.php - Aggiornare credenziali
$host = 'localhost';
$db   = 'svuotafrigo';
$user = 'root';  // Cambiare in produzione
$pass = 'mysql'; // Cambiare in produzione
```

#### 5. Permessi
```bash
# Cache directory scrivibile
chmod -R 775 cache/
chown -R www-data:www-data cache/
```

#### 6. Apache VirtualHost (Opzionale)
```apache
<VirtualHost *:80>
    ServerName svuotafrigo.local
    DocumentRoot /var/www/html/SVUOTAFRIGO
    
    <Directory /var/www/html/SVUOTAFRIGO>
        AllowOverride All
        Require all granted
    </Directory>
</VirtualHost>
```

### File Configurazione

**`.htaccess`** (giÃ  presente):
```apache
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^ index.php [QSA,L]
```

**`config.php`** (costanti applicazione):
- `TEMPLATES_FOLDER`: Directory template Mustache
- `TENGINE_CACHE_FOLDER`: Directory cache compilati
- `BASE_PATH`: Path base URL (es. `/SVUOTAFRIGO`)
- `TENGINE_TEMPLATE_FILE_EXTENSION`: `.mst`

---

## TESTING E QUALITY ASSURANCE

### Stato Attuale

**Testing Implementato**: âŒ Nessun framework automatizzato  
**Metodologia**: Testing manuale via browser

### Testing Strategy Raccomandato

#### Unit Testing (PHPUnit)
```bash
composer require --dev phpunit/phpunit
./vendor/bin/phpunit tests/
```

**Test Consigliati**:
- Controller logic (mock database)
- Database class (connection, queries)
- Utility classes (Page, UIMessage)

#### Integration Testing
- Controller + Database interaction
- Middleware pipeline
- Routing resolution

#### End-to-End Testing (Selenium/Playwright)
**Workflow da testare**:
1. Ricerca ricetta (ospite)
2. Registrazione nuovo utente
3. Login
4. Creazione ricetta
5. Visualizzazione "Le Mie Ricette"

### Code Quality Tools

**Static Analysis**:
```bash
composer require --dev phpstan/phpstan
./vendor/bin/phpstan analyze src/
```

**Code Style**:
```bash
composer require --dev squizlabs/php_codesniffer
./vendor/bin/phpcs --standard=PSR12 controllers/
```

---

## MANUTENZIONE E TROUBLESHOOTING

### Backup Strategy

**Database**:
```bash
# Backup giornaliero
mysqldump -u root -p svuotafrigo > backup_$(date +%Y%m%d).sql

# Restore
mysql -u root -p svuotafrigo < backup_20260120.sql
```

**Codice**: Versionato su Git

### Common Issues

#### 1. Database Connection Failed
**Sintomi**: Errore "Errore di connessione" all'avvio  
**Cause possibili**:
- MySQL non in esecuzione
- Credenziali errate in `Database.php`
- Database `svuotafrigo` non esistente

**Soluzione**:
```bash
# Verificare MySQL running
systemctl status mysql

# Testare connessione
mysql -u root -p -e "SHOW DATABASES;"

# Ricreare database se necessario
mysql -u root -p -e "CREATE DATABASE svuotafrigo;"
```

#### 2. 404 Not Found su tutte le route
**Causa**: mod_rewrite non attivo o `.htaccess` ignorato  
**Soluzione**:
```bash
# Abilitare mod_rewrite
a2enmod rewrite
systemctl restart apache2

# Verificare AllowOverride All in Apache config
```

#### 3. Template not found
**Causa**: Permessi cache o path errati  
**Soluzione**:
```bash
# Permessi cache
chmod -R 775 cache/

# Verificare TEMPLATES_FOLDER in config.php
```

### Log Locations

- **Apache Error Log**: `/var/log/apache2/error.log`
- **MySQL Error Log**: `/var/log/mysql/error.log`
- **PHP Errors**: Configurabile in `php.ini`

### Monitoring

**Metriche Consigliate**:
- Uptime applicazione
- Tempo risposta pagine
- Errori 500/404
- Utilizzo database connections
- Dimensione cache

---

## GUIDA PER CONTRIBUTORI

### Setup Ambiente Sviluppo

1. **Fork repository**
2. **Clone localmente**:
   ```bash
   git clone https://github.com/YOUR-USERNAME/SVUOTAFRIGO.git
   cd SVUOTAFRIGO
   ```
3. **Installare AMPPS/XAMPP**
4. **Setup database** (vedi sezione Deployment)
5. **Install dependencies**:
   ```bash
   composer install
   ```

### Development Workflow

1. **Creare feature branch**:
   ```bash
   git checkout -b feature/nome-funzionalita
   ```
2. **Sviluppare e testare**
3. **Commit con messaggi descrittivi**:
   ```bash
   git commit -m "Add: filtro per data creazione ricette"
   ```
4. **Push e Pull Request** verso branch `develop`

### Coding Standards

**PHP**: PSR-12  
**CSS**: BEM methodology  
**JavaScript**: ESLint (configurazione da definire)  
**Commit Messages**: Conventional Commits (Add/Fix/Update/Refactor)

### Pull Request Checklist

- [ ] Codice segue PSR-12
- [ ] FunzionalitÃ  testata manualmente
- [ ] Nessun warning PHP
- [ ] Database migrations (se applicabile)
- [ ] Documentazione aggiornata
- [ ] Changelog entry

---

## CONCLUSIONI

SVUOTAFRIGO Ã¨ un'applicazione web moderna costruita con solide fondamenta tecniche (Slim 4, Mustache, MySQL) che affronta concretamente il problema dello spreco alimentare domestico. L'architettura MVC, i pattern implementati e l'attenzione alla sicurezza garantiscono una base robusta per evoluzioni future.

### Punti di Forza

âœ… Architettura pulita e manutenibile  
âœ… Stack tecnologico moderno e standard (PSR)  
âœ… InclusivitÃ  tramite filtri avanzati  
âœ… Interfaccia user-friendly  
âœ… Documentazione completa

### Aree di Miglioramento

ğŸ”§ Implementare CSRF protection  
ğŸ”§ Aggiungere test automatizzati  
ğŸ”§ Migrare configurazione a .env  
ğŸ”§ Implementare caching avanzato  
ğŸ”§ Aggiungere API REST

---

**Versione**: 2.0  
**Data Ultimo Aggiornamento**: Gennaio 2026  
**Azienda**: 0-Waste  
**Licenza**: (Da specificare)

---

*Per domande tecniche, consultare il team di sviluppo. Per utilizzo applicazione, riferirsi al Manuale Utente.*
